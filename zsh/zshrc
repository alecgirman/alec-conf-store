PHONY: install-firsttime install

ZSH = ${HOME}/.zsh
AUTOLOAD = ${ZSH}/autoload
COPYFILE = cp -v
COPYDIR = cp -rv
MACROPROC= m4
STARTFILE=ashe-zshloader.zsh

install: clean
	mkdir -p ${ZSH}/
	cat /ashe/zsh/autoload/*.zsh > ${ZSH}/compiled.zsh
	${COPYDIR} plugins/ ${ZSH}/
	${COPYFILE} zshrc ${HOME}/.zshrc

oldinstall: clean
	mkdir -p ${ZSH}/
	${COPYDIR} autoload/ ${ZSH}/
	${COPYDIR} plugins/ ${AUTOLOAD}/
	${COPYFILE} zshrc ${ZSH}/${STARTFILE}

install-firsttime: install
	echo "source ${ZSH}/ashe-zshloader.zsh" >> ${HOME}/.zshrc

clean:
	rm -rfv ${AUTOLOAD}
	rm -fv ${ZSH}/${STARTFILE}
	@echo 'Remember to remove the line at the bottom of your zshrc file that loads this plugin.'
